/* D2L Brightspace Dark Mode */

/* ---- Top-frame filter ---- */
html.d2l-dark-mode-top {
  filter: invert(1) hue-rotate(180deg);
  background-color: white !important;
  color: black !important;
  color-scheme: dark;
}

/* Break color-scheme: dark inheritance in child frames */
html.d2l-dark-mode-active:not(.d2l-dark-mode-top) {
  color-scheme: normal !important;
}

/* ---- Top layer (popovers, dialogs, fullscreen) ---- */
html.d2l-dark-mode-active :popover-open,
html.d2l-dark-mode-active dialog:modal,
html.d2l-dark-mode-active :fullscreen:not(video):not(iframe) {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* Counter-invert media inside top-layer */
html.d2l-dark-mode-active :popover-open :is(img, canvas, picture),
html.d2l-dark-mode-active dialog:modal :is(img, canvas, picture) {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* Counter-invert video inside top-layer (only when video dark mode is off) */
html.d2l-dark-mode-active:not(.d2l-video-dark) :popover-open video,
html.d2l-dark-mode-active:not(.d2l-video-dark) dialog:modal video,
html.d2l-dark-mode-active:not(.d2l-video-dark) :fullscreen:not(video):not(iframe) video {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* Fullscreen video escapes the html filter â€” handle both dark mode states */
html.d2l-dark-mode-active:not(.d2l-video-dark) video:fullscreen,
html.d2l-dark-mode-active:not(.d2l-video-dark) iframe.d2l-video-iframe:fullscreen {
  filter: none !important;
}


html.d2l-dark-mode-active.d2l-video-dark video:fullscreen,
html.d2l-dark-mode-active.d2l-video-dark iframe.d2l-video-iframe:fullscreen {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* Child frame fullscreen: parent filter no longer applies */
html.d2l-dark-mode-active:not(.d2l-dark-mode-top):not(.d2l-video-dark) :fullscreen video {
  filter: none !important;
}

html.d2l-dark-mode-active:not(.d2l-dark-mode-top).d2l-video-dark :fullscreen video {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* ---- Counter-invert media (light DOM) ---- */
html.d2l-dark-mode-active img:not(svg img),
html.d2l-dark-mode-active canvas,
html.d2l-dark-mode-active picture {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* Counter-invert video (only when video dark mode is off) */
html.d2l-dark-mode-active:not(.d2l-video-dark) video {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* ---- Counter-invert background-image elements ---- */
html.d2l-dark-mode-active [style*="background-image"] {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* Cancel nested media counter-inversion (parent filter covers them) */
html.d2l-dark-mode-active [style*="background-image"] img:not(svg img),
html.d2l-dark-mode-active [style*="background-image"] canvas,
html.d2l-dark-mode-active [style*="background-image"] picture {
  filter: none !important;
}

html.d2l-dark-mode-active:not(.d2l-video-dark) [style*="background-image"] video {
  filter: none !important;
}

/* ---- Document dark mode ---- */
html.d2l-doc-dark canvas {
  filter: none !important;
}

/* ---- Scrollbar styling ---- */
html.d2l-dark-mode-active ::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

html.d2l-dark-mode-active ::-webkit-scrollbar-track {
  background: #1a1a1a;
}

html.d2l-dark-mode-active ::-webkit-scrollbar-thumb {
  background: #555555;
  border-radius: 5px;
}

html.d2l-dark-mode-active ::-webkit-scrollbar-thumb:hover {
  background: #777777;
}