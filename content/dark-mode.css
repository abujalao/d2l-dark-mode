/* Class names are defined in shared/config.js (D2LConfig.CSS). Keep in sync. */

/*
 * D2L Brightspace Dark Mode — Universal Filter Approach
 * Applies filter: invert(1) hue-rotate(180deg) on <html> in the top frame.
 * Counter-inverts media elements so images/video appear normal.
 */

/* ============================================================
   TOP-FRAME FILTER
   Applied only to the top-level frame via JS class.
   Sub-frames inherit the inversion from the parent compositing,
   so they must NOT apply the filter again.
   ============================================================ */
html.d2l-dark-mode-top {
  filter: invert(1) hue-rotate(180deg);
  background-color: white !important;
  color: black !important;
}

/* ============================================================
   TOP LAYER
   Popovers, modal dialogs, and fullscreen elements live in the
   browser's top layer, outside the html filter's reach.
   Apply the inversion directly on these elements.
   ============================================================ */
html.d2l-dark-mode-active :popover-open,
html.d2l-dark-mode-active dialog:modal,
html.d2l-dark-mode-active :fullscreen {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* Counter-invert media inside top-layer elements */
html.d2l-dark-mode-active :popover-open :is(img, video, canvas, picture),
html.d2l-dark-mode-active dialog:modal :is(img, video, canvas, picture) {
  filter: invert(1) hue-rotate(180deg) !important;
}


/* ============================================================
   NATIVE DARK SCHEME
   Ensures form controls, scrollbars, date pickers, etc.
   use their built-in dark appearance. This property
   inherits into shadow DOM.
   ============================================================ */
html.d2l-dark-mode-active {
  color-scheme: dark;
}

/* ============================================================
   COUNTER-INVERT MEDIA (LIGHT DOM)
   Images, videos, canvas, and picture elements need
   double-inversion to appear in their original colors.
   Inline SVGs are excluded — they are typically D2L icons
   and should remain inverted (appearing as light-on-dark).
   ============================================================ */
html.d2l-dark-mode-active img:not(svg img),
html.d2l-dark-mode-active video,
html.d2l-dark-mode-active canvas,
html.d2l-dark-mode-active picture {
  filter: invert(1) hue-rotate(180deg) !important;
}

/* ============================================================
   DOCUMENT DARK MODE
   When document dark mode is active in a document viewer iframe,
   don't counter-invert the canvas — let the page-level
   filter invert the document content (white → dark, black → light).
   ============================================================ */
html.d2l-doc-dark canvas {
  filter: none !important;
}

/* ============================================================
   SCROLLBAR STYLING (Webkit)
   ============================================================ */
html.d2l-dark-mode-active ::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

html.d2l-dark-mode-active ::-webkit-scrollbar-track {
  background: #1a1a1a;
}

html.d2l-dark-mode-active ::-webkit-scrollbar-thumb {
  background: #555555;
  border-radius: 5px;
}

html.d2l-dark-mode-active ::-webkit-scrollbar-thumb:hover {
  background: #777777;
}